#!/usr/bin/env lua
--/sbin/init: manages (some part of) the user space

--well, for now its just a placeholder for being a parent of all processes

_handler = {}
_handler.signal_handler = function (sig)
    if sig == 'kill' then
        print("init: recieved SIGKILL")
        os.safe_shutdown()
    end
end

function main(args)
    --TODO: ability to runlevel
    if args[1] ~= nil then
        runlevel = tonumber(args[1])
    else
        runlevel = 1
    end
    if runlevel == 0 then
        os.safe_shutdown()
    elseif runlevel == 1 then
        os.runfile_proc("/sbin/login")
    end
    return 0
end

