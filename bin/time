#!/usr/bin/env lua
--/bin/time: measure time used by a command (in minecraft ticks)
--NOTE: uses absolute paths

local args = {...}

function tail(t)
   if # t <= 1 then
      return nil
   end
   local newtable = {}
   for i, v in ipairs(t) do
      if i > 1 then
          table.insert(newtable, v)
      end
   end
   return newtable
end 

program = args[1]
arguments = tail(args)

local starting_ticks = (os.time() * 1000 + 18000)%24000

if program == nil and arguments == nil then
elseif program ~= nil and arguments == nil then
	shell.run(program)
elseif program ~= nil and arguments ~= nil then
	shell.run(program .. " " .. table.concat(arguments, " "))
end

local ending_ticks = (os.time() * 1000 + 18000)%24000

print("ticks: "..(ending_ticks-starting_ticks))
